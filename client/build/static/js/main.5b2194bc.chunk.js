(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{243:function(e,t,o){},274:function(e,t,o){},291:function(e,t,o){},315:function(e,t){},317:function(e,t){},329:function(e,t){},331:function(e,t){},359:function(e,t){},361:function(e,t){},362:function(e,t){},367:function(e,t){},369:function(e,t){},375:function(e,t){},377:function(e,t){},396:function(e,t){},408:function(e,t){},411:function(e,t){},461:function(e,t,o){},463:function(e,t,o){},464:function(e,t,o){},472:function(e,t,o){},528:function(e,t){},620:function(e,t,o){"use strict";o.r(t);var n=o(4),s=o.n(n),a=o(275),i=o.n(a),r=(o(291),o(631)),c=o(627),l=o(634),d=o(36),u=o.n(d),h=o(26),m=o.n(h),p=function(e){e?(console.log("authtoken"),m.a.defaults.headers.common.Authorization=e):delete m.a.defaults.headers.common.Authorization},b=function(e){e?m.a.defaults.headers.common.Challenge=e:delete m.a.defaults.headers.common.Challenge},j="GET_ERRORS",g="USER_LOADING",x="SET_CURRENT_USER",f="SET_CHALLENGE",v="SET_ROOM",y=function(e){return{type:x,payload:e}},O=function(){return function(e){localStorage.removeItem("userToken"),p(!1),e(y({}))}},w=(o(311),function(e){return function(t){console.log("setChall call"),console.log(e),m.a.post("/api/users/getChallenge",e).then((function(e){var o=e.data.token;localStorage.setItem("challengeToken",o),b(o);var n=u()(o);t(C(n))})).catch((function(e){return console.log(e)}))}}),C=function(e){return{type:f,payload:e}},k=function(){return function(e){localStorage.removeItem("challengeToken"),b(!1),e(C({}))}},I=function(e){return{type:v,payload:e}},S=function(){return function(e){localStorage.removeItem("roomToken"),e(I({}))}},N=o(30),T=o(57),R=o(277),D=o(18),L=o(431),E={isAuthenticated:!1,user:{},loading:!1,challenge:{},isChallenge:!1,room:"",isRoom:!1},M={},G=Object(T.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(D.a)(Object(D.a)({},e),{},{isAuthenticated:!L(t.payload),user:t.payload});case g:return Object(D.a)(Object(D.a)({},e),{},{loading:!0});case f:return Object(D.a)(Object(D.a)({},e),{},{isChallenge:!L(t.payload),challenge:t.payload});case v:return Object(D.a)(Object(D.a)({},e),{},{isRoom:!L(t.payload),room:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload;default:return e}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,B=Object(T.e)(G,{},U(Object(T.a)(R.a))),F=o(278),P=Object(F.io)("http://localhost:3000"),Q=(o(461),o(14)),z=o(15),A=o(17),_=o(16),W=o(624),J=o(0),H=(n.Component,o(463),function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){return Object(Q.a)(this,o),t.apply(this,arguments)}return Object(z.a)(o,[{key:"render",value:function(){return Object(J.jsxs)("div",{className:"landingbg",children:[Object(J.jsx)("div",{style:{height:"10vh"},className:"row",children:Object(J.jsx)("div",{className:"col s12 center-align",children:Object(J.jsxs)("text",{style:{fontFamily:"monospace",fontSize:"30px"},className:"brand-logo black-text",children:[Object(J.jsx)("i",{className:"material-icons",children:"code"}),"CompCoder"]})})}),Object(J.jsx)("div",{className:"row justify-content-center",style:{marginTop:"7vh",marginBottom:"7vh"},children:Object(J.jsxs)("h2",{children:[Object(J.jsx)("b",{children:"Challenge"})," yourself, become a better programmer"," "]})}),Object(J.jsxs)("div",{className:"row justify-content-center",style:{marginTop:"7vh",marginBottom:"7vh",marginLeft:"15vw",marginRight:"15vw"},children:[Object(J.jsx)("p",{className:"flow-text grey-text text-darken-1",children:"Face off in a head to head challenge against real programmers around the world! Pass those test cases, and cut that runtime if you want to come out on top!"}),Object(J.jsx)("br",{})]}),Object(J.jsxs)("div",{className:"row justify-content-center",children:[Object(J.jsx)(W.a,{to:"/register",children:Object(J.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginRight:"100px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Register"})}),Object(J.jsx)(W.a,{to:"/login",children:Object(J.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginLeft:"100px"},onClick:this.toLoginPage,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})}}]),o}(n.Component)),Y=(o(464),o(625)),q=o(632),K=o(626),V=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(e){var n;return Object(Q.a)(this,o),(n=t.call(this,e)).submit=function(e){e.preventDefault();n.sendFeedback("basic",{})},n.sendFeedback=function(e,t){window.emailjs.send("yahoo",e,t).then((function(e){}))},n.changeName=function(e){e.preventDefault(),n.setState({name:e.target.value})},n.changeProblem=function(e){e.preventDefault(),n.setState({problem:e.target.value})},n.state={username:"",problem:"",email:""},n}return Object(z.a)(o,[{key:"render",value:function(){return Object(J.jsx)("div",{className:"bugreportbg",children:Object(J.jsxs)("div",{style:{width:"70vw",margin:"auto"},children:[Object(J.jsx)("div",{className:"d-flex justify-content-center",style:{marginBottom:"10vh"},children:Object(J.jsx)("span",{style:{fontSize:"40px"},children:"Oh no, a bug!"})}),Object(J.jsx)("div",{className:"d-flex justify-content-center",children:Object(J.jsx)("label",{htmlFor:"basic-url",style:{fontSize:"25px",color:"black"},children:"What's your username?"})}),Object(J.jsx)("div",{className:"d-flex justify-content-center",children:Object(J.jsx)(Y.a,{className:"mb-3",onChange:this.changeName,children:Object(J.jsx)(q.a,{placeholder:"Username","aria-label":"Username"})})}),Object(J.jsx)("div",{className:"d-flex justify-content-center",children:Object(J.jsx)("label",{htmlFor:"basic-url",style:{fontSize:"25px",color:"black"},children:"What seems to be the issue?"})}),Object(J.jsx)("div",{className:"d-flex justify-content-center",children:Object(J.jsx)(Y.a,{className:"mb-3",onChange:this.changeProblem,children:Object(J.jsx)(q.a,{as:"textarea",placeholder:"Explain here","aria-label":"explain"})})}),Object(J.jsx)("div",{className:"d-flex justify-content-center",children:Object(J.jsx)(K.a,{onClick:this.submit,children:"Submit"})})]})})}}]),o}(n.Component),X=o(71),Z=o(633),$=o(58),ee=o.n($),te=(o(243),function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;return Object(Q.a)(this,o),(e=t.call(this)).onChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var o={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(o,e.props.history),console.log(o)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(z.a)(o,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return Object(J.jsx)("div",{className:"authbg",children:Object(J.jsxs)("div",{className:"container",children:[Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"15vh"},children:Object(J.jsxs)("text",{style:{fontFamily:"monospace",fontSize:"30px"},className:"brand-logo black-text",children:[Object(J.jsx)("i",{className:"material-icons",children:"code"}),"CompCoder ",Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})}),Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"5vh"},children:Object(J.jsxs)(W.a,{to:"/",className:"btn-flat waves-effect",children:[Object(J.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]})}),Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"3vh"},children:Object(J.jsxs)("h4",{children:[Object(J.jsx)("b",{children:"Register"})," below"]})}),Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"3vh"},children:Object(J.jsxs)("p",{className:"grey-text text-darken-1",children:["Already have an account? ",Object(J.jsx)(W.a,{to:"/login",children:"Log in"})]})}),Object(J.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:ee()("",{invalid:e.name})}),Object(J.jsx)("label",{htmlFor:"name",children:"Name"}),Object(J.jsx)("span",{className:"red-text",children:e.name})]}),Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:ee()("",{invalid:e.email})}),Object(J.jsx)("label",{htmlFor:"email",children:"Email"}),Object(J.jsx)("span",{className:"red-text",children:e.email})]}),Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:ee()("",{invalid:e.password})}),Object(J.jsx)("label",{htmlFor:"password",children:"Password"}),Object(J.jsx)("span",{className:"red-text",children:e.password})]}),Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:ee()("",{invalid:e.password2})}),Object(J.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(J.jsx)("span",{className:"red-text",children:e.password2})]}),Object(J.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(J.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Sign up"})})]})]})})}}]),o}(n.Component)),oe=Object(N.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(o){m.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return o({type:j,payload:e.response.data})}))}}})(Object(Z.a)(te)),ne=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;return Object(Q.a)(this,o),(e=t.call(this)).onChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var o={email:e.state.email,password:e.state.password};e.props.loginUser(o)},e.state={email:"",password:"",errors:{},challenge:{}},e}return Object(z.a)(o,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return Object(J.jsx)("div",{className:"authbg",children:Object(J.jsxs)("div",{className:"container",children:[Object(J.jsx)("div",{style:{height:"10vh"},className:"row",children:Object(J.jsx)("div",{className:"col sm",children:Object(J.jsxs)("text",{style:{fontFamily:"monospace",fontSize:"30px"},className:"brand-logo black-text",children:[Object(J.jsx)("i",{className:"material-icons",children:"code"}),"CompCoder",Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})})}),Object(J.jsx)("div",{style:{height:"10vh"},className:"row",children:Object(J.jsxs)(W.a,{to:"/",className:"btn-flat waves-effect",children:[Object(J.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]})}),Object(J.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(J.jsxs)("h4",{children:[Object(J.jsx)("b",{children:"Login"})," below"]}),Object(J.jsxs)("p",{className:"grey-text text-darken-1",children:["Don't have an account? ",Object(J.jsx)(W.a,{to:"/register",children:"Register"})]})]}),Object(J.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:ee()("",{invalid:e.email||e.emailnotfound})}),Object(J.jsx)("label",{htmlFor:"email",children:"Email"}),Object(J.jsxs)("span",{className:"red-text",children:[e.email,e.emailnotfound]})]}),Object(J.jsxs)("div",{className:"input-field col s12",children:[Object(J.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:ee()("",{invalid:e.password||e.passwordincorrect})}),Object(J.jsx)("label",{htmlFor:"password",children:"Password"}),Object(J.jsxs)("span",{className:"red-text",children:[e.password,e.passwordincorrect]})]}),Object(J.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(J.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})})}}]),o}(n.Component),se=Object(N.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){m.a.post("/api/users/login",e).then((function(e){console.log(e.data);var o=e.data.token;localStorage.setItem("userToken",o),p(o);var n=u()(o);t(y(n))})).catch((function(e){return t({type:j,payload:e.response.data})}))}}})(ne),ae=o(285),ie=o(630),re=["component","auth"],ce=Object(N.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,o=e.auth,n=Object(ae.a)(e,re);return Object(J.jsx)(c.a,Object(D.a)(Object(D.a)({},n),{},{render:function(e){return!0===o.isAuthenticated?Object(J.jsx)(t,Object(D.a)({},e)):Object(J.jsx)(ie.a,{to:"/login"})}}))})),le=(o(472),function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;Object(Q.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={minutes:0,seconds:30},e}return Object(z.a)(o,[{key:"componentWillMount",value:function(){var e=this;this.setState({minutes:localStorage.getItem("checkInMinutes")||0,seconds:localStorage.getItem("checkInSeconds")||30}),this.checkInterval=setInterval((function(){e.state.seconds>0&&e.setState({seconds:e.state.seconds-1}),0===e.state.seconds&&(0===e.state.minutes?(e.props.timesUp(),clearInterval(e.checkInterval)):e.setState({minutes:e.state.minutes-1,seconds:59})),localStorage.setItem("checkInMinutes",e.state.minutes),localStorage.setItem("checkInSeconds",e.state.seconds)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.checkInterval),console.log("unmount timer"),localStorage.removeItem("checkInMinutes"),localStorage.removeItem("checkInSeconds")}},{key:"render",value:function(){var e=this.state,t=e.minutes,o=e.seconds;return Object(J.jsx)("div",{children:0===t&&0===o?Object(J.jsx)("h4",{children:"00:00"}):Object(J.jsxs)("h4",{children:[t,": ",o<10?"0"+o:o]})})}}]),o}(n.Component)),de=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;Object(Q.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={minutes:0,seconds:30},e}return Object(z.a)(o,[{key:"componentWillMount",value:function(){var e=this;this.setState({minutes:localStorage.getItem("compMinutes")||0,seconds:localStorage.getItem("compSeconds")||30}),this.compInterval=setInterval((function(){e.state.seconds>0&&e.setState({seconds:e.state.seconds-1}),0===e.state.seconds&&(0===e.state.minutes?(e.props.timesUp(),clearInterval(e.compInterval)):e.setState({minutes:e.state.minutes-1,seconds:59})),localStorage.setItem("compMinutes",e.state.minutes),localStorage.setItem("compSeconds",e.state.seconds)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.compInterval),console.log("unmount timer"),localStorage.removeItem("compMinutes"),localStorage.removeItem("compSeconds")}},{key:"render",value:function(){var e=this.state,t=e.minutes,o=e.seconds;return Object(J.jsx)("div",{children:0===t&&0===o?Object(J.jsx)("h4",{children:"00:00"}):Object(J.jsxs)("h4",{children:[t,": ",o<10?"0"+o:o]})})}}]),o}(n.Component),ue=o(629),he=o(282),me=o.n(he),pe=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(e){var n;return Object(Q.a)(this,o),(n=t.call(this,e)).onLogoutClick=function(e){e.preventDefault(),n.props.logoutUser()},n.getData=function(e){n.setState({lobbies:e})},n.changeLobbies=function(){return P.emit("getLobbies")},n.getNamesToLobbies=function(e){n.setState({namesToLobbies:e})},n.getGames=function(e){var t,o,s,a,i,r,c,l,d;console.log(P),P.emit("getLobbies"),P.on("lobbies",n.getData),P.on("namesToLobbies",n.getNamesToLobbies);var u=document.getElementById("lobbyTable");u.style="border: 1px solid black; padding: 10px;",u.textContent="",(t=u.insertRow(-1)).height="30px",c=t.insertCell(-1),l=t.insertCell(-1),d=t.insertCell(-1),r=t.insertCell(-1),o=document.createElement("text"),s=document.createElement("text"),a=document.createElement("text"),i=document.createElement("text"),o.type="text",s.type="text",a.type="text",i.type="text",o.style="font-size: 25px;",s.style="font-size: 25px;",a.style="font-size: 25px;",i.style="font-size: 25px;",s.textContent="Lobby Name",a.textContent="Username",i.textContent="Rank",o.textContent="Click to Join",r.appendChild(o),c.appendChild(s),l.appendChild(a),d.appendChild(i);var h=0;h=n.state.lobbies.length<10?n.state.lobbies.length:10;for(var m=0;m<h;m++){(t=u.insertRow(-1)).height="30px",c=t.insertCell(-1),l=t.insertCell(-1),d=t.insertCell(-1),r=t.insertCell(-1),o=document.createElement("button"),s=document.createElement("text"),a=document.createElement("text"),i=document.createElement("text"),o.type="button",s.type="text",a.type="text",i.type="text",o.className="btn blue darken-3 waves-effect waves-light",s.style="font-size: 20px;",a.style="font-size: 20px",i.style="font-size: 20px",s.textContent=n.state.lobbies[m].room.split("/")[0];try{a.textContent=n.state.namesToLobbies[m].name,i.textContent=n.getRank(n.state.namesToLobbies[m].rank)}catch(b){a.textContent="Refresh to view",i.textContent="Refresh to view"}o.textContent="Join",o.value=n.state.lobbies[m].room,o.onclick=n.joinGame,(n.state.isLobbyCreated||n.state.lobbies[m].user===P.id)&&(o.disabled=!0),r.appendChild(o),c.appendChild(s),l.appendChild(a),d.appendChild(i)}var p=document.getElementById("pageButtons");p.textContent="",t=p.insertRow(-1);for(m=0;10*m<n.state.lobbies.length;)r=t.insertCell(-1),o=document.createElement("button"),r.width="20px",o.type="button",o.textContent=m+1,o.value=m+1,r.onclick=n.getPageOfLobbies,r.appendChild(o),m++},n.getPageOfLobbies=function(e){var t,o,s,a,i,r,c,l,d,u=e.target.value,h=document.getElementById("lobbyTable");h.style="border: 1px solid black; padding: 10px;",h.textContent="",(t=h.insertRow(-1)).height="5vh",c=t.insertCell(-1),l=t.insertCell(-1),d=t.insertCell(-1),r=t.insertCell(-1),o=document.createElement("text"),s=document.createElement("text"),a=document.createElement("text"),i=document.createElement("text"),o.type="text",s.type="text",a.type="text",i.type="text",o.style="font-size: 25px;",s.style="font-size: 25px;",a.style="font-size: 25px;",i.style="font-size: 25px;",s.textContent="Lobby Name",a.textContent="Username",i.textContent="Rank",o.textContent="Click to Join",r.appendChild(o),c.appendChild(s),l.appendChild(a),d.appendChild(i);var m=0;m=n.state.lobbies.length<10*u?n.state.lobbies.length:10*u;for(var p=10*(u-1);p<m;p++){c=(t=h.insertRow(-1)).insertCell(-1),l=t.insertCell(-1),d=t.insertCell(-1),r=t.insertCell(-1),o=document.createElement("button"),s=document.createElement("text"),a=document.createElement("text"),i=document.createElement("text"),o.type="button",s.type="text",a.type="text",i.type="text",o.className="btn blue darken-3 waves-effect waves-light",s.style="font-size: 20px;",a.style="font-size: 20px",i.style="font-size: 20px",s.textContent=n.state.lobbies[p].room.split("/")[0];try{a.textContent=n.state.namesToLobbies[p].name,i.textContent=n.getRank(n.state.namesToLobbies[p].rank)}catch(j){a.textContent="Refresh to view",i.textContent="Refresh to view"}o.textContent="Join",o.value=n.state.lobbies[p].room,o.onclick=n.joinGame,n.state.lobbies[p].user===P.id&&(o.disabled=!0),r.appendChild(o),c.appendChild(s),l.appendChild(a),d.appendChild(i)}var b=document.getElementById("pageButtons");b.textContent="",t=b.insertRow(-1);for(p=0;10*p<n.state.lobbies.length;)r=t.insertCell(-1),o=document.createElement("button"),r.width="20px",o.type="button",o.textContent=p+1,o.value=p,r.onclick=n.getPageOfLobbies,r.appendChild(o),p++},n.createLobby=function(e,t){return function(o){if(console.log(n.props.auth.user.coolDownEnd-(new Date).getTime()),console.log(n.props.auth.user.isCoolDown),console.log(n.props.auth.user.name),n.state.isQueued)n.showIsQueuedAlert();else if(n.props.auth.user.isCoolDown&&n.props.auth.user.coolDownEnd-(new Date).getTime()>0)n.showCoolDownWaitModal();else if(n.props.auth.user.isCoolDown&&n.props.endCoolDown(),console.log(n.props.room),document.getElementById("createLobbyButton").disabled=!0,document.getElementById("destroyLobbyButton").disabled=!1,n.state.isLobbyCreated);else{var s=100+Math.floor(10*Math.random())+1;console.log(s),P.emit("createGame",{name:e,rank:t,ID:s}),P.on("newGame",(function(e){n.setState({isLobbyCreated:!0}),n.setState({lobby:e.room}),n.props.setCurrentRoom({room:e.room}),n.props.challengeUser({ID:e.room.split("/")[1]}),n.props.setIsCompetitive({name:n.props.auth.user.name,isCompetitive:!1}),n.showCreateModal(),console.log("set")})),P.on("joinerReady",(function(e){n.showCheckInModal()}))}}},n.joinGame=function(e){var t=e.target.value;if(n.state.isQueued)n.showIsQueuedAlert();else if(n.props.auth.user.isCoolDown&&n.props.auth.user.coolDownEnd-(new Date).getTime()>0)n.showCoolDownWaitModal();else{n.props.auth.user.isCoolDown&&n.props.endCoolDown(),console.log(t);var o=t.split("/")[1];console.log(o),console.log(t.split("/")[1]),P.emit("gameJoin",{room:t}),P.on("isJoinSuccessful",(function(e){e.success?(n.showJoinGameModal(),console.log("roomNotFull"),console.log(o),console.log(t),n.props.challengeUser({ID:t.split("/")[1]}),n.props.setCurrentRoom({room:t}),n.props.setIsCompetitive({name:n.props.auth.user.name,isCompetitive:!1}),console.log(t),P.emit("joinerReady",{room:t}),P.on("creatorReady",(function(){console.log("creatorready"),n.setState({isGameReady:!0}),n.props.history.push("/challengePage")})),P.on("creatorDidntCheckIn",(function(){n.showCreaterDidntConfirmModal(),P.emit("leaveAsCreatorDidntCheck",{room:t}),n.props.removeChallenge(),n.props.removeRoom()}))):e.success||n.showGameFullModal()}))}},n.destroyLobby=function(e){n.setState({isLobbyCreated:!1,lobby:""}),P.emit("joinGameAfterCreateGame",{user:n.props.auth.name,room:n.props.room.room}),n.props.removeRoom(),n.props.removeChallenge(),document.getElementById("destroyLobbyButton").disabled=!0,document.getElementById("createLobbyButton").disabled=!1},n.getRank=function(e){var t;return console.log(n.props.auth.user.rank),t=1===(e/100|0)?"Wood ":2===(e/100|0)?"Bronze ":3===(e/100|0)?"Silver ":4===(e/100|0)?"Gold ":5===(e/100|0)?"Platinum ":6===(e/100|0)?"Diamond ":"Global Elite ",t+=e%100<=25?"1":e%100<=50?"2":e%100<=75?"3":"4"},n.showCreateModal=function(){console.log("show"),n.setState({showCreate:!0})},n.closeCreateModal=function(){n.setState({showCreate:!1})},n.showCheckInModal=function(){console.log("show"),n.setState({showCheckIn:!0})},n.closeCheckInModal=function(){n.setState({showCheckIn:!1})},n.showJoinGameModal=function(){console.log("show"),n.setState({showJoinGame:!0})},n.closeJoinGameModal=function(){n.setState({showJoinGame:!1})},n.showCreaterDidntConfirmModal=function(){console.log("show"),n.setState({showCreaterDidntConfirm:!0})},n.closeCreaterDidntConfirmModal=function(){n.setState({showCreaterDidntConfirm:!1})},n.showGameFullModal=function(){console.log("show"),n.setState({showGameFull:!0})},n.closeGameFullModal=function(){n.setState({showGameFull:!1})},n.showCoolDownWaitModal=function(){console.log("show"),n.setState({showCoolDownWait:!0})},n.closeCoolDownWaitModal=function(){n.setState({showCoolDownWait:!1})},n.showConfirmCompModal=function(){n.setState({showConfirmComp:!0})},n.closeIsQueuedAlert=function(){n.setState({showIsQueued:!1})},n.showIsQueuedAlert=function(){n.setState({showIsQueued:!0})},n.createrCheckedIn=function(){console.log("ready"),console.log(n.props.room.room),P.emit("beginGame",{room:n.props.room.room}),n.setState({isGameReady:!0}),n.props.history.push("/challengePage")},n.compCheckIn=function(){P.emit("compCheckedIn",{room:n.props.room.room}),n.setState({isCheckedIn:!0}),n.state.isOpponentCheckedIn&&(console.log("their checked in"),n.setState({isGameReady:!0}),n.props.history.push("/challengePage"))},n.timesUp=function(){n.props.removeChallenge(),n.props.removeRoom(),P.emit("checkInNoGood",{room:n.props.room.room})},n.compTimesUp=function(){n.props.removeChallenge(),n.props.removeRoom(),P.emit("compTimesUp",{room:n.props.room.room}),n.setState({isQueued:!1})},n.compQueue=function(e){e.preventDefault(),console.log("compQueuecalled"),document.getElementById("startCompSearchButton").disabled=!0,document.getElementById("endCompSearchButton").disabled=!1,n.setState({isQueued:!0});var t=(new Date).getTime()/1e3;console.log(t),P.emit("compQueue",{name:n.props.auth.user.name,rank:n.props.auth.user.rank,time:t,socketID:P.id}),P.emit("getNumberOfPeopleQueuing"),P.on("numberOfPeopleQueuing",(function(e){document.getElementById("tellNumOfPplInQueue").textContent="There are currently "+e.num+" people queued up"})),n.peopleQueuingInterval=setInterval((function(){P.emit("getNumberOfPeopleQueuing"),P.on("numberOfPeopleQueuing",(function(e){document.getElementById("tellNumOfPplInQueue").textContent="There are currently "+e.num+" people queued up"}))}),3e3),n.queueInterval=setInterval((function(){console.log("interval"),P.emit("checkPriorityQueue",{name:n.props.auth.user.name,rank:n.props.auth.user.rank,time:t})}),5e3),P.on("foundPerson",(function(e){console.log("foundPerson"),clearInterval(n.queueInterval),clearInterval(n.peopleQueuingInterval),document.getElementById("tellNumOfPplInQueue").textContent="";var t=100+Math.floor(8*Math.random())+1;P.emit("queueCreateLobby",{index:e.index,challengeID:t,name:n.props.auth.user.name}),P.on("compRoomCreated",(function(e){console.log(e.challengeID),n.props.challengeUser({ID:e.challengeID}),n.props.setCurrentRoom({room:e.room}),n.props.setIsCompetitive({name:n.props.auth.user.name,isCompetitive:!0}),n.showConfirmCompModal(),P.on("opponentCheckedIn",(function(){console.log("opponentCheckedIn"),n.setState({isOpponentCheckedIn:!0}),n.state.isCheckedIn&&(console.log("im checked in"),n.setState({isGameReady:!0}),n.props.history.push("/challengePage"))}))}))})),P.on("personFoundYou",(function(e){console.log("found"),clearInterval(n.queueInterval),clearInterval(n.peopleQueuingInterval),document.getElementById("tellNumOfPplInQueue").textContent="",P.on("compRoomCreated",(function(e){console.log(e.challengeID),n.props.challengeUser({ID:e.challengeID}),n.props.setCurrentRoom({room:e.room}),n.props.setIsCompetitive({name:n.props.auth.user.name,isCompetitive:!0}),n.showConfirmCompModal(),P.on("opponentCheckedIn",(function(){n.setState({isOpponentCheckedIn:!0}),n.state.isCheckedIn&&(console.log("im checked in"),n.setState({isGameReady:!0}),n.props.history.push("/challengePage"))}))}))}))},n.endCompQueue=function(e){e.preventDefault(),P.emit("endCompSearch",{name:n.props.auth.user.name}),clearInterval(n.queueInterval),clearInterval(n.peopleQueuingInterval),document.getElementById("tellNumOfPplInQueue").textContent="",n.setState({isQueued:!1}),document.getElementById("startCompSearchButton").disabled=!1,document.getElementById("endCompSearchButton").disabled=!0},console.log("redirected"),n.state={lobbies:[],namesToLobbies:[],isGameReady:!1,isLobbyCreated:!1,lobby:"",showCreate:!1,showCheckIn:!1,showJoinGame:!1,showCreaterDidntConfirm:!1,showGameFull:!1,showCoolDownWait:!1,showConfirmComp:!1,showIsQueued:!1,userRank:"",queueTime:0,queueInterval:{},isQueued:!1,isOpponentCheckedIn:!1,isCheckedIn:!1},n.props.isChallenge&&(console.log("isChallenge"),n.props.removeChallenge()),n.props.isRoom&&(console.log("isRoom"),n.props.removeRoom()),n}return Object(z.a)(o,[{key:"componentWillReceiveProps",value:function(e){e.auth.isChallenge&&e.auth.isRoom&&this.state.isGameReady&&this.props.history.push("/challengePage")}},{key:"componentDidMount",value:function(){this.getRank(),console.log(this.props.challenge),console.log(this.props.room),this.props.isChallenge&&(console.log("remove"),this.props.removeChallenge()),this.props.isRoom&&(console.log("remove"),P.emit("opponentLeft",{room:this.props.room}),this.props.removeRoom()),console.log(this.props.challenge),console.log(this.props.room),this.getGames(),P.emit("endCompSearch",{name:this.props.auth.user.name})}},{key:"render",value:function(){var e=this.props.auth.user;return Object(J.jsx)("div",{className:"dashboardbg",children:Object(J.jsxs)("div",{style:{width:"90vw",margin:"auto"},children:[Object(J.jsxs)(ue.a,{show:this.state.showCreate,onHide:this.closeCreateModal,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"You have created a lobby!"}),Object(J.jsxs)("p",{children:["Your lobby name is ",this.state.lobby]}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeCreateModal,children:"OK"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showCheckIn,onHide:this.closeCheckInModal,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"Someone has joined your lobby!"}),Object(J.jsx)("p",{children:"Please hit the button below to confirm, and start the match!"}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-start",children:Object(J.jsx)(le,{timesUp:this.timesUp})}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.createrCheckedIn,children:"Join"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showJoinGame,onHide:this.closeJoinGameModal,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"You have requested to join this game"}),Object(J.jsx)("p",{children:"Just waiting for the creator to confirm..."}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeJoinGameModal,children:"OK"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showGameFull,onHide:this.closeGameFullModal,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"This game is now full"}),Object(J.jsx)("p",{children:"Sorry, hit refresh to get the most updated list of games"}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeGameFullModal,children:"OK"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showCreaterDidntConfirm,onHide:this.closeCreaterDidntConfirm,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"The other player failed to confirm the game"}),Object(J.jsx)("p",{children:"Either join another game, or start one yourself!"}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeCreaterDidntConfirmModal,children:"OK"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showCoolDownWait,onHide:this.closeCoolDownWait,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"You are still cooling down from a match abandon"}),Object(J.jsxs)("p",{children:["Please wait another ",(this.props.auth.user.coolDownEnd-(new Date).getTime())/1e3," seconds"]}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeCoolDownWaitModal,children:"OK"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showConfirmComp,variant:"info",style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"A game has been found!"}),Object(J.jsx)("p",{children:"Please hit the button below to confirm, and start the match!"}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-start",children:Object(J.jsx)(de,{timesUp:this.compTimesUp})}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.compCheckIn,children:"Join"})})]}),Object(J.jsxs)(ue.a,{show:this.state.showIsQueued,onHide:this.closeIsQueuedAlert,variant:"info",dismissable:!0,style:{position:"fixed",zIndex:"1",width:"80vw"},children:[Object(J.jsx)(ue.a.Heading,{children:"You can't create join a casual lobby when in line for a competitive game!"}),Object(J.jsx)("p",{children:"If you'd like to play a casual game instead, you can end your competitive search..."}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"d-flex justify-content-end",children:Object(J.jsx)(K.a,{onClick:this.closeIsQueuedAlert,children:"OK"})})]}),Object(J.jsx)("div",{className:"row",style:{height:"3vh"},children:Object(J.jsx)("div",{className:"col sm",children:Object(J.jsxs)("text",{style:{fontFamily:"monospace",fontSize:"30px",textAlign:"center"},className:"brand-logo black-text",children:[Object(J.jsx)("i",{className:"material-icons",children:"code"}),"CompCoder"]})})}),Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"row d-flex",style:{height:"5vh"},children:[Object(J.jsx)("div",{className:"mr-auto",children:Object(J.jsx)(K.a,{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",backgroundColor:"rgb(71, 214, 114)"},onClick:this.onLogoutClick,children:"Logout"})}),Object(J.jsx)("div",{className:"ml-auto",children:Object(J.jsxs)("text",{children:[Object(J.jsx)("b",{children:e.name.split(" ")[0]}),", ",this.getRank(this.props.auth.user.rank)]})})]}),Object(J.jsxs)("div",{className:"row",style:{height:"40vh"},children:[Object(J.jsxs)("div",{className:"col-sm",style:{border:"1px solid black",marginRight:"8px",backgroundColor:"rgba(153, 255, 255, 0.2)"},children:[Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"4vh"},children:Object(J.jsx)("h3",{children:"Welcome, to the gauntlet..."})}),Object(J.jsx)("div",{className:"row justify-content-left",style:{height:"15vh"},children:Object(J.jsxs)("p",{class:"tieReminder",children:["-Compete 1-on-1 against others in real time on a variety of programming problems.",Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),"-To the right, you'll see you can queue up for a competitive game against people of similar skills.",Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),"-Want a laid back game? Below you'll see casual games, where you can either create or join a lobby to play with somebody, or add a friend, and play with them instead"]})})]}),Object(J.jsxs)("div",{className:"col-sm",style:{border:"1px solid black",marginLeft:"8px",marginBottom:"10vh",backgroundColor:"rgba(153, 255, 255, 0.2)"},children:[Object(J.jsx)("div",{className:"row justify-content-center",style:{height:"8vh"},children:Object(J.jsx)("text",{class:"compTitle",children:Object(J.jsx)("b",{children:"Feeling confident? Play competitive to queue up with people of a similar rank!"})})}),Object(J.jsxs)("div",{className:"d-flex row",style:{height:"6vh"},children:[Object(J.jsx)("div",{className:"mr-auto",style:{marginLeft:"5vw"},children:Object(J.jsx)(K.a,{id:"startCompSearchButton",onClick:this.compQueue,style:{backgroundColor:"rgb(71, 214, 114)",width:"15vw"},children:"Queue"})}),Object(J.jsx)("div",{className:"ml-auto",style:{marginRight:"5vw"},children:Object(J.jsx)(K.a,{id:"endCompSearchButton",onClick:this.endCompQueue,style:{backgroundColor:"rgb(185, 82, 100)",width:"15vw"},children:"Cancel"})})]}),Object(J.jsx)("div",{className:"d-flex row justify-content-center",style:{height:"4vh"},children:Object(J.jsx)("text",{id:"tellNumOfPplInQueue"})}),Object(J.jsx)("div",{className:"d-flex row justify-content-center",style:{height:"8vh"},children:Object(J.jsx)(me.a,{color:"#66ff66",loading:this.state.isQueued,size:100})})]})]}),Object(J.jsx)("div",{className:"row justify-content-center",children:Object(J.jsxs)("h4",{children:[Object(J.jsx)("br",{}),Object(J.jsx)("hr",{}),Object(J.jsx)("br",{}),"Join a casual game"]})}),Object(J.jsxs)("div",{className:"row d-flex",children:[Object(J.jsx)("div",{class:"mr-auto",children:Object(J.jsx)(K.a,{style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",float:"left"},onClick:this.getGames,children:"Refresh"})}),Object(J.jsxs)("div",{class:"ml-auto",children:[Object(J.jsx)(K.a,{style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.createLobby(e.name,e.rank),id:"createLobbyButton",children:"Create"}),Object(J.jsx)(K.a,{id:"destroyLobbyButton",style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.destroyLobby,children:"Leave"})]})]}),Object(J.jsx)("h5",{children:" "}),Object(J.jsxs)("div",{className:"row justify-content-center",style:{height:"65vh"},children:[Object(J.jsx)("div",{style:{width:"93vw"},children:Object(J.jsx)("table",{id:"lobbyTable",className:"bordered",style:{border:"1px solid black",padding:"10px"}})}),Object(J.jsx)("div",{className:"col sm",children:Object(J.jsx)("table",{id:"pageButtons"})})]}),Object(J.jsx)("div",{className:"d-flex row justify-content-center",style:{height:"8vh"},children:Object(J.jsxs)("p",{className:"bottomText",style:{width:"100vw"},children:[Object(J.jsx)("hr",{}),"This site was created by Jacob Richichi",Object(J.jsx)("br",{})]})}),Object(J.jsx)("div",{className:"d-flex row justify-content-center",style:{height:"5vh"},children:Object(J.jsx)(W.a,{to:"/bugReport",children:Object(J.jsx)("p",{className:"bottomText",children:"Found a bug? Click here to let me know!"})})})]})})}}]),o}(n.Component),be=Object(N.b)((function(e){return{auth:e.auth,challenge:e.auth.challenge,isChallenge:e.auth.isChallenge,room:e.auth.room,isRoom:e.auth.isRoom}}),{logoutUser:O,challengeUser:w,setCurrentRoom:function(e){return function(t){m.a.post("api/users/getRoom",e).then((function(e){var o=e.data.token;localStorage.setItem("roomToken",o);var n=u()(o);t(I(n))})).catch((function(e){return console.log(e.response.data)}))}},removeChallenge:k,removeRoom:S,endCoolDown:function(e){return function(t){m.a.post("/api/users/endCoolDown",e).then((function(e){var o=e.data.token;console.log("setting local storage"),localStorage.setItem("userToken",o),console.log("setting authtoken"),p(o);var n=u()(o);console.log("dispatching"),t(y(n))})).catch((function(e){console.log(e),t({type:j,payload:e.response.data})}))}},setIsCompetitive:function(e){return function(t){m.a.post("/api/users/setIsCompetitive",e).then((function(e){}))}}})(pe),je=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;return Object(Q.a)(this,o),(e=t.call(this)).onChallengeClick=function(t){t.preventDefault();var o={difficulty:e.state.difficulty};e.props.challengeUser(o,e.props.history)},e.onChange=function(t){e.setState({difficulty:t.target.value})},e.state={difficulty:""},e}return Object(z.a)(o,[{key:"render",value:function(){return Object(J.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(J.jsxs)("div",{className:"row",children:[Object(J.jsx)("h4",{children:"Select your difficulty!"}),Object(J.jsx)("div",{class:"input-field col s12",children:Object(J.jsxs)("select",{class:"browser-default",onChange:this.onChange,value:this.state.difficulty,children:[Object(J.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Choose your difficulty"}),Object(J.jsx)("option",{value:"1",children:"Beginner"}),Object(J.jsx)("option",{value:"2",children:"Intermediate"}),Object(J.jsx)("option",{value:"3",children:"Hard"}),Object(J.jsx)("option",{value:"4",children:"Expert"})]})}),Object(J.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onChallengeClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Go"})]})})}}]),o}(n.Component),ge=Object(N.b)((function(e){return{auth:e.auth}}),{challengeUser:w})(je),xe=o(88),fe=o.n(xe),ve=o(157),ye=(o(484),o(274),function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(){var e;Object(Q.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={minutes:0,seconds:30},e}return Object(z.a)(o,[{key:"componentWillMount",value:function(){var e=this;this.setState({minutes:localStorage.getItem("minutes")||0,seconds:localStorage.getItem("seconds")||30}),this.myInterval=setInterval((function(){e.state.seconds>0&&e.setState({seconds:e.state.seconds-1}),0===e.state.seconds&&(0===e.state.minutes?(e.props.timesUp(),clearInterval(e.myInterval)):(15!==e.state.minutes&&10!==e.state.minutes&&5!==e.state.minutes&&1!==e.state.minutes||e.props.intervalUpdate(),e.setState({minutes:e.state.minutes-1,seconds:59}))),localStorage.setItem("minutes",e.state.minutes),localStorage.setItem("seconds",e.state.seconds)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.myInterval),console.log("unmount"),localStorage.removeItem("minutes"),localStorage.removeItem("seconds")}},{key:"render",value:function(){var e=this.state,t=e.minutes,o=e.seconds;return Object(J.jsx)("div",{children:0===t&&0===o?Object(J.jsx)("span",{style:{fontFamily:"digital-clock-font",fontSize:"30px"},children:"00:00"}):Object(J.jsxs)("span",{style:{fontFamily:"digital-clock-font",fontSize:"30px"},children:[t,": ",o<10?"0"+o:o]})})}}]),o}(n.Component)),Oe=o(628),we=o(283),Ce=o(284),ke=function(e){Object(A.a)(o,e);var t=Object(_.a)(o);function o(e){var n;return Object(Q.a)(this,o),(n=t.call(this,e)).back=function(e){e.preventDefault(),n.state.isGameFinished?(n.setState({leaving:!0}),P.emit("endGame",{room:n.props.room.room}),n.props.history.push("/dashboard")):n.showConfirmLeave()},n.confirmedAbandon=function(e){e.preventDefault(),n.setState({leaving:!0}),P.emit("endGame",{room:n.props.room.room}),n.props.coolDown({name:n.props.user.name,time:(new Date).getTime()+18e5}),n.props.history.push("/dashboard")},n.opponentLeave=function(){n.setState({leaving:!0}),n.props.history.push("/dashboard")},n.backMyFault=function(){n.setState({leaving:!0}),P.emit("endGame",{room:n.props.room.room}),n.props.history.push("/dashboard")},n.input=function(e,t){n.state.firstInput||parseInt(n.props.room.room.split("/")[1])!==n.props.challenge.challenge.i&&n.backMyFault(),P.emit("checkRoom"),localStorage.setItem("srcCode",e),n.setState({input:e,count:1,firstInput:!0})},n.userInput=function(e){e.preventDefault(),n.setState({user_input:e.target.value})},n.submit=function(){var e=Object(ve.a)(fe.a.mark((function e(t){var o,s,a,i,r,c,l,d,u,h,m,p,b,j,g,x,f,v,y,O,w,C,k,I;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(((o=(new Date).getTime())-n.state.timeOfLastRun)/1e3>=30)){e.next=62;break}for(n.setState({timeOfLastRun:(new Date).getTime()}),s=document.getElementById("output").textContent,s=document.getElementById("output"),a=n.props.challenge.challenge,i=0,r="",c=n.state.input,l=(new Date).getTime()-n.state.startTime,d="\tpublic static void main(String[] args){\n",u=0,"",h="",m={},p=!0,b={},j=0,g=0,x=0,f=0,i=0;i<a.inputs.length;i++){for(d=d+"\t\ttry{\n\t\t\tSystem.out.println("+a.methodName+"(",v=0;v<a.inputs[i].length;v++)d+=a.inputs[i][v],v<a.inputs[i].length-1&&(d+=", ");d+="));}\n\t\tcatch(Exception e){\n\t\t\tSystem.out.println(e.toString());\n\t\t}\n"}d+="\t}\n";case 24:if(!(c.length>0)){e.next=37;break}if(u=c.indexOf("\n"),0===c.indexOf("public class Main")){e.next=31;break}r+=c.substring(0,u+1),c=c.substring(u+1,c.length),e.next=35;break;case 31:return r=r+"\n"+a.dataStructure+"\n"+c.substring(0,u+1),c=c.substring(u+1,c.length),r=r.concat(d,c),e.abrupt("break",37);case 35:e.next=24;break;case 37:return e.next=39,fetch("https://judge0-extra.p.rapidapi.com/submissions",{method:"POST",headers:{"x-rapidapi-host":"judge0-ce.p.rapidapi.com","x-rapidapi-key":"e51bc475ffmshb688bd7febd7bdap175735jsn486eb27febcb","content-type":"application/json",accept:"application/json"},body:JSON.stringify({source_code:r,language_id:62})});case 39:return y=e.sent,e.next=42,y.json();case 42:O=e.sent,w={status:{description:"Queue"},stderr:null,compile_output:null};case 44:if("Accepted"===w.status.description||null!=w.stderr||null!=w.compile_output){e.next=58;break}if(!(++f>100)){e.next=48;break}return e.abrupt("break",58);case 48:if(!O.token){e.next=56;break}return C="https://judge0-extra.p.rapidapi.com/submissions/".concat(O.token,"?base64_encoded=true"),e.next=52,fetch(C,{method:"GET",headers:{"x-rapidapi-host":"judge0-ce.p.rapidapi.com","x-rapidapi-key":"e51bc475ffmshb688bd7febd7bdap175735jsn486eb27febcb","content-type":"application/json"}});case 52:return k=e.sent,e.next=55,k.json();case 55:w=e.sent;case 56:e.next=44;break;case 58:if(w.stdout){for(h=atob(w.stdout),g=w.time,x=w.memory,b=h.split("\n"),I=0;I<b.length;I++)b[I]===a.outputs[I]?(m[I]=!0,j++):(p=!1,m[I]=!1);r="You passed "+j+"/"+a.inputs.length+" cases, and it took you "+l/1e3+" seconds. The average run time was "+g/a.inputs.length+" ms and you used "+x+" KB of memory!\nDid all test cases pass?: "+p+"\n\n",localStorage.setItem("numCorrect",j),localStorage.setItem("runTime",g),localStorage.setItem("memory",x)}else w.stderr?(h=atob(w.stderr),r=h,p=!1):(h=atob(w.compile_output),r=h,p=!1);s.textContent=r,e.next=63;break;case 62:document.getElementById("warningText").textContent="Please wait another "+(30-(o-n.state.timeOfLastRun)/1e3)+" seconds to run again";case 63:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.timesUp=Object(ve.a)(fe.a.mark((function e(){var t,o,s,a,i,r,c,l,d,u,h,m,p,b,j,g,x,f,v,y,O,w,C,k,I,S,N,T,R;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.setState({isGameFinished:!0}),t=document.getElementById("output"),o=n.props.challenge.challenge,s="",a=!1,i=!1,l=2,d=0,P.on("opponentsChallengeInfo",(function(e){if(s="Your opponent passed "+e.oppNumCorrect+"/"+o.inputs.length+" cases. Their run time was "+e.oppRunTime+" ms and they used "+e.oppMemory+" KB of memory!\nDid all their test cases pass?: "+e.oppCorrect+"\n\n",n.setState({theirFinishInfo:s}),i=!0,console.log("OCI"),!0===a){console.log("hasown"),h+=s;var d="";r<v?(d="You passed more test cases, so you won :)",h+="\nYou passed more test cases, so you won :)",l=1):r>v?(d="They passed more test cases, so you lost :(",h+="\nThey passed more test cases, so you lost :(",l=0):(d="You both had the same number of case right",h+="\nYou both had the same number of case right",y<c?(d+=", but you had a better run time, so you win :^)",h+=", but you had a better run time, so you win :^)",l=1):c<y?(d+=", but they had a better run time, so you lost :^(",h+=", but they had a better run time, so you lost :^(",l=0):(d+=", and you both somehow had the same runtime. Lets call it a draw",h+=", and you both somehow had the same runtime. Lets call it a draw ",l=2)),t.textContent=h,n.setState({winnerInfo:d}),n.showGameFinishedAlert(),n.props.user.isCompetitive&&(0===l?n.props.user.rank-20>=100&&n.props.updateUserRank({name:n.props.user.name,rank:n.props.user.rank,eloUpdate:-20}):1===l&&n.props.user.rank+20<=799&&n.props.updateUserRank({name:n.props.user.name,rank:n.props.user.rank,eloUpdate:20}))}else console.log("no hasown yet"),r=e.oppNumCorrect,c=e.oppRunTime,e.oppMemory,e.oppCorrect})),u=0,h="",m=n.state.input,(new Date).getTime()-n.state.startTime,p="\tpublic static void main(String[] args){\n",b=0,"",j="",g={},x=!0,f={},v=0,y=0,O=0,u=0;u<o.inputs.length;u++){for(p=p+"\t\ttry{\n\t\t\tSystem.out.println("+o.methodName+"(",w=0;w<o.inputs[u].length;w++)p+=o.inputs[u][w],w<o.inputs[u].length-1&&(p+=", ");p+="));}\n\t\tcatch(Exception e){\n\t\t\tSystem.out.println(e.toString());\n\t\t}\n"}p+="\t}\n";case 25:if(!(m.length>0)){e.next=38;break}if(b=m.indexOf("\n"),0===m.indexOf("public class Main")){e.next=32;break}h+=m.substring(0,b+1),m=m.substring(b+1,m.length),e.next=36;break;case 32:return h=h+"\n"+o.dataStructure+"\n"+m.substring(0,b+1),m=m.substring(b+1,m.length),h=h.concat(p,m),e.abrupt("break",38);case 36:e.next=25;break;case 38:return e.next=40,fetch("https://judge0-extra.p.rapidapi.com/submissions",{method:"POST",headers:{"x-rapidapi-host":"judge0-ce.p.rapidapi.com","x-rapidapi-key":"e51bc475ffmshb688bd7febd7bdap175735jsn486eb27febcb","content-type":"application/json",accept:"application/json"},body:JSON.stringify({source_code:h,language_id:62})});case 40:return C=e.sent,console.log("running code"),e.next=44,C.json();case 44:k=e.sent,I={status:{description:"Queue"},stderr:null,compile_output:null},console.log("running code 2");case 47:if("Accepted"===I.status.description||null!=I.stderr||null!=I.compile_output){e.next=63;break}if(!(++d>100)){e.next=51;break}return e.abrupt("break",63);case 51:if(!k.token){e.next=61;break}return console.log("token"),S="https://judge0-extra.p.rapidapi.com/submissions/".concat(k.token,"?base64_encoded=true"),e.next=56,fetch(S,{method:"GET",headers:{"x-rapidapi-host":"judge0-ce.p.rapidapi.com","x-rapidapi-key":"e51bc475ffmshb688bd7febd7bdap175735jsn486eb27febcb","content-type":"application/json"}});case 56:return N=e.sent,console.log("await get solution"),e.next=60,N.json();case 60:I=e.sent;case 61:e.next=47;break;case 63:if(I.stdout){for(console.log("solution got"),j=atob(I.stdout),y=I.time,O=I.memory,f=j.split("\n"),T=0;T<f.length;T++)f[T]===o.outputs[T]?(g[T]=!0,v++):(x=!1,g[T]=!1);h="You passed "+v+"/"+o.inputs.length+" cases. The run time was "+y+" ms and you used "+O+" KB of memory!\nDid all test cases pass?: "+x+"\n\n",n.setState({yourFinishInfo:h})}else I.stderr?(j=atob(I.stderr),h=j,x=!1):(j=atob(I.compile_output),h=j,x=!1);a=!0,console.log("finished running code"),P.emit("myChallengeInfo",{room:n.props.room.room,numCorrect:v,runTime:y,memory:O,correct:x}),i&&(R="",console.log("hasopp"),h+=s,r<v?(R="You passed more test cases, so you won :)",h+="\nYou passed more test cases, so you won :)",l=1):r>v?(R="They passed more test cases, so you lost :(",h+="\nThey passed more test cases, so you lost :(",l=0):(R="You both had the same number of case right",h+="\nYou both had the same number of case right",y<c?(R+=", but you had a better run time, so you win :^)",h+=", but you had a better run time, so you win :^)",l=1):c<y?(R+=", but they had a better run time, so you lost :^(",h+=", but they had a better run time, so you lost :^(",l=0):(R+=", and you both somehow had the same runtime. Lets call it a draw",h+=", and you both somehow had the same runtime. Lets call it a draw ",l=2)),t.textContent=h,n.setState({winnerInfo:R}),n.showGameFinishedAlert(),n.props.user.isCompetitive&&(0===l?n.props.user.rank-20>=100&&n.props.updateUserRank({name:n.props.user.name,rank:n.props.user.rank,eloUpdate:-20}):1===l&&n.props.user.rank+20<=799&&n.props.updateUserRank({name:n.props.user.name,rank:n.props.user.rank,eloUpdate:20})));case 68:case"end":return e.stop()}}),e)}))),n.intervalUpdate=function(){localStorage.getItem("numCorrect")&&P.emit("intervalUpdate",{numCorrect:localStorage.getItem("numCorrect"),runTime:localStorage.getItem("runTime"),memory:localStorage.getItem("memory"),room:n.props.room.room})},n.showOppInfoAlert=function(){n.setState({showOppInfo:!0})},n.showGameFinishedAlert=function(){n.setState({showGameFinished:!0})},n.showConfirmLeave=function(){n.setState({showConfirmLeave:!0})},n.closeConfirmLeave=function(){n.setState({showConfirmLeave:!1})},n.mapMakeDescription=function(){n.props.challenge.challenge.description.split("%").map((function(e){return Object(J.jsxs)("text",{children:[e,Object(J.jsx)("br",{})]})}))},n.state={input:"",output:"",language_id:62,user_input:"",startTime:(new Date).getTime(),count:0,room:"",timeOfLastRun:0,leaving:!1,mounted:!1,firstInput:!1,showOppInfo:!1,showGameFinished:!1,showConfirmLeave:!1,yourFinishInfo:"",theirFinishInfo:"",winnerInfo:"",oppNumCorrect:0,oppRunTime:0,oppMemory:0,description:"",exampleOne:"",exampleTwo:"",isGameFinished:!1},P.on("gameEnd",n.opponentLeave),P.on("intervalUpdate",(function(e){n.setState({oppNumCorrect:e.numCorrect,oppRunTime:e.runTime,oppMemory:e.memory}),n.showOppInfoAlert()})),n}return Object(z.a)(o,[{key:"componentWillReceiveProps",value:function(e){e.isChallenge||(console.log("nextProps"),this.props.history.push("/dashboard"))}},{key:"componentWillUnmount",value:function(){console.log("unmounting"),console.log(this.props.isChallenge),console.log(this.props.user),localStorage.removeItem("srcCode"),localStorage.removeItem("numCorrect"),localStorage.removeItem("runTime"),localStorage.removeItem("memory"),localStorage.removeItem("description"),localStorage.removeItem("exampleOne"),localStorage.removeItem("exampleTwo"),P.emit("endGame",{room:this.props.room.room}),this.props.removeRoom(),this.props.removeChallenge()}},{key:"componentWillMount",value:function(){if(localStorage.getItem("description"))this.setState({description:localStorage.getItem("description"),exampleOne:localStorage.getItem("exampleOne"),exampleTwo:localStorage.getItem("exampleTwo")});else{var e=this.props.challenge.challenge.description,t=e.substring(e.indexOf("!")+1,e.indexOf("@")),o=e.substring(e.indexOf("@")+1,e.length);t=t.split("%").map((function(e){return Object(J.jsxs)("text",{children:[e,Object(J.jsx)("br",{})]})})),o=o.split("%").map((function(e){return Object(J.jsxs)("text",{children:[e,Object(J.jsx)("br",{})]})})),e=(e=e.substring(0,e.indexOf("!"))).split("%").map((function(e){return Object(J.jsxs)("text",{children:[e,Object(J.jsx)("br",{})]})})),this.setState({description:e,exampleOne:t,exampleTwo:o}),localStorage.setItem("description",e),localStorage.setItem("exampleOne",t),localStorage.setItem("exampleTwo",o)}}},{key:"componentDidMount",value:function(){this.state.leaving||P.emit("rejoinGame",{room:this.props.room.room})}},{key:"enableTab",value:function(e){document.getElementById(e).onkeydown=function(e){if(9===e.keyCode){var t=this.value,o=this.selectionStart,n=this.selectionEnd;return this.value=t.substring(0,o)+"\t"+t.substring(n),this.selectionStart=this.selectionEnd=o+1,!1}}}},{key:"rejoinRoom",value:function(){P.emit("rejoinRoom",{room:this.props.room})}},{key:"render",value:function(){var e,t=this.props.challenge.challenge;this.props.room.room;if(console.log("render"),!1===this.state.firstInput){var o=" \n";if("  "!==t.dataStructure&&(o="/*\n"+t.dataStructure+"\n*//*\n")," "!==t.imports){e=t.imports.split("|");for(var n=0;n<e.length;n++)o=o+e[n]+"\n"}o=o+"public class Main{\n\tpublic static "+t.outputType+" "+t.methodName+"(";for(var s=0;s<t.inputTypes.length;s++)o=o+t.inputTypes[s]+" "+t.inputVarNames[s],s<t.inputTypes.length-1&&(o+=", ");o+="){\n\n\t}\n}",localStorage.getItem("srcCode")?localStorage.getItem("srcCode")!==o?(o,localStorage.setItem("srcCode",o),this.setState({input:o}),!1===this.state.firstInput&&window.location.reload(!1)):localStorage.getItem("srcCode"):(o,localStorage.setItem("srcCode",o))}return Object(J.jsx)("div",{className:"challengepagebg",children:Object(J.jsxs)(Ce.a,{direction:"row",children:[Object(J.jsxs)("div",{id:"transparent",children:[Object(J.jsx)("div",{style:{marginTop:"10px"},children:Object(J.jsx)("h4",{children:Object(J.jsx)("p",{id:"title",children:t.name})})}),Object(J.jsx)("br",{}),Object(J.jsxs)("div",{style:{marginLeft:"5px",marginRight:"5px"},children:[Object(J.jsx)("div",{class:"d-flex justify-content-left",children:Object(J.jsx)("text",{id:"description",children:this.state.description})}),Object(J.jsx)("hr",{}),Object(J.jsx)("br",{}),Object(J.jsx)("div",{class:"d-flex justify-content-left",children:Object(J.jsxs)("text",{id:"exampleTitle",children:[""===this.state.exampleOne?"":"Example 1:",Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})}),Object(J.jsx)("div",{class:"d-flex justify-content-left",children:Object(J.jsx)("text",{id:"example",children:this.state.exampleOne})}),Object(J.jsx)("div",{class:"d-flex justify-content-left",children:Object(J.jsxs)("text",{id:"exampleTitle",children:[""===this.state.exampleTwo?"":"Example 2:",Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})}),Object(J.jsx)("div",{class:"d-flex justify-content-left",children:Object(J.jsx)("text",{id:"example",children:this.state.exampleTwo})})]})]}),Object(J.jsxs)("div",{style:{width:"100vw"},children:[Object(J.jsxs)(ue.a,{show:this.state.showOppInfo,variant:"info",dismissable:!0,children:[Object(J.jsx)(ue.a.Heading,{children:"Little update on your opponents progress..."}),Object(J.jsxs)("p",{children:["They currently have passed ",this.state.oppNumCorrect," cases, have a run time of ",this.state.oppRunTime," ms and are using ",this.state.oppMemory," KBs of memory."]})]}),Object(J.jsxs)(ue.a,{show:this.state.showGameFinished,variant:"info",dismissable:!0,children:[Object(J.jsx)(ue.a.Heading,{children:this.state.winnerInfo}),Object(J.jsxs)("p",{children:["Your game data looked like:",Object(J.jsx)("br",{}),this.state.yourFinishInfo,Object(J.jsx)("br",{}),Object(J.jsx)("hr",{}),"Their data looked like: ",Object(J.jsx)("br",{}),this.state.theirFinishInfo]})]}),Object(J.jsxs)(ue.a,{show:this.state.showConfirmLeave,variant:"info",dismissable:!0,children:[Object(J.jsx)(ue.a.Heading,{children:"Are you sure you would like to leave?"}),Object(J.jsx)("p",{children:"Be warned, abandoning incurs a cooldown!"}),Object(J.jsx)("hr",{}),Object(J.jsx)(K.a,{onClick:this.confirmedAbandon,children:"Leave"}),Object(J.jsx)(K.a,{onClick:this.closeConfirmLeave,children:"Nevermind"})]}),Object(J.jsx)("div",{class:"row justify-content-center",style:{height:"8vh"},children:Object(J.jsxs)("text",{style:{fontFamily:"monospace",fontSize:"30px"},className:"brand-logo black-text",children:[Object(J.jsx)("i",{className:"material-icons",children:"code"}),"CompCoder"]})}),Object(J.jsxs)("div",{class:"d-flex justify-content-between",style:{height:"8vh"},children:[Object(J.jsxs)("button",{type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",onClick:this.back,style:{marginLeft:"20px"},children:[Object(J.jsx)("i",{class:"fas fa-cog fa-fw"})," Back"]}),Object(J.jsx)("div",{style:{marginRight:"3vw"},children:Object(J.jsx)(ye,{timesUp:this.timesUp,intervalUpdate:this.intervalUpdate})})]}),Object(J.jsxs)("div",{class:"row justify-content-center",style:{height:"65vh"},children:[Object(J.jsx)(Oe.a,{xs:8,children:Object(J.jsx)(we.a,{required:!0,height:"65vh",defaultLanguage:"java",defaultValue:o,name:"solution",id:"source",onChange:this.input,editorProps:{blockingScroll:!0},children:o})}),Object(J.jsx)(Oe.a,{xs:3,children:Object(J.jsx)("textarea",{id:"output",children:this.state.output})})]}),Object(J.jsxs)("div",{class:"row justify-content-center",style:{height:"9vh"},children:[Object(J.jsxs)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",onClick:this.submit,children:[Object(J.jsx)("i",{class:"fas fa-cog fa-fw"})," Run"]}),Object(J.jsx)("text",{id:"warningText"})]})]})]})})}}]),o}(n.Component),Ie=Object(N.b)((function(e){return{challenge:e.auth.challenge,isChallenge:e.auth.isChallenge,room:e.auth.room,isRoom:e.auth.isRoom,user:e.auth.user}}),{removeChallenge:k,removeRoom:S,challengeUser:w,updateUserRank:function(e){return function(t){console.log("action userData"),console.log(e),m.a.post("/api/users/updateUserRank",e).then((function(e){var o=e.data.token;console.log("just posted"),console.log("setting local storage"),localStorage.setItem("userToken",o),console.log("setting authtoken"),p(o);var n=u()(o);console.log("dispatching"),t(y(n))})).catch((function(e){console.log(e),t({type:j,payload:e.response.data})}))}},coolDown:function(e){return function(t){m.a.post("/api/users/coolDown",e).then((function(e){var o=e.data.token;console.log("setting local storage"),localStorage.setItem("userToken",o),console.log("setting authtoken"),p(o);var n=u()(o);console.log("dispatching"),t(y(n))})).catch((function(e){console.log(e),t({type:j,payload:e.response.data})}))}}})(ke);if(localStorage.userToken){var Se=localStorage.userToken;p(Se);var Ne=u()(Se);B.dispatch(y(Ne));var Te=Date.now()/1e3;Ne.exp<Te&&(B.dispatch(O()),window.location.href="./login")}if(localStorage.challengeToken){var Re=localStorage.challengeToken;b(Re);var De=u()(Re);B.dispatch(C(De))}if(localStorage.roomToken){var Le=localStorage.roomToken,Ee=u()(Le);B.dispatch(I(Ee))}var Me=function(){return Object(J.jsx)(N.a,{store:B,children:Object(J.jsx)(r.a,{children:Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(c.a,{exact:!0,path:"/",component:H}),Object(J.jsx)(c.a,{exact:!0,path:"/register",component:oe}),Object(J.jsx)(c.a,{exact:!0,path:"/login",component:se}),Object(J.jsx)(c.a,{exact:!0,path:"/bugReport",component:V}),Object(J.jsxs)(l.a,{children:[Object(J.jsx)(ce,{exact:!0,path:"/dashboard",component:be}),Object(J.jsx)(ce,{exact:!0,path:"/challengeSelect",component:ge}),Object(J.jsx)(ce,{exact:!0,path:"/challengePage",component:Ie})]})]})})})},Ge=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,635)).then((function(t){var o=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;o(e),n(e),s(e),a(e),i(e)}))};o(619);i.a.render(Object(J.jsx)(s.a.StrictMode,{children:Object(J.jsx)(Me,{})}),document.getElementById("root")),Ge()}},[[620,1,2]]]);
//# sourceMappingURL=main.5b2194bc.chunk.js.map